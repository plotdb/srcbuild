!function(){var v,w;function _(t,e){var n,i={}.hasOwnProperty;for(n in e)i.call(e,n)&&(t[n]=e[n]);return t}function y(t,e){for(var n=-1,i=e.length>>>0;++n<i;)if(t===e[n])return!0;return!1}v=function(e,t,n){return e.node.addEventListener(t,function(t){return n(_({evt:t},e))})},(w=function(t){var e,n,i,r,o,s,a,c,h,d,l=this;for(null==t&&(t={}),this.evtHandler={},this._ctxs=t.ctxs||null,this.views=[this].concat(t.baseViews||[]),this._ctx=t.context||t.ctx||null,t.context&&console.warn("[ldview] `context` is deprecated. use `ctx` instead."),this.attr=t.attr||{},this.style=t.style||{},this.handler=t.handler||{},this.action=t.action||{},this.text=t.text||{},this.initer=t.init||{},this.prefix=t.prefix,this.global=t.global||!1,this.ld=this.global?"pd":"ld",this.initRender=null==t.initRender||t.initRender,this.root="string"==typeof t.root?ld$.find(document,t.root,0):t.root,this.root||console.warn("[ldview] warning: no node found for root ",t.root),this.root.setAttribute&&!this.global&&(this.id="ld-"+Math.random().toString(36).substring(2),this.root.setAttribute("ld-scope-"+this.id,"")),(this.template=t.template)&&(this.root.textContent="",this.root.appendChild(this.template.cloneNode(!0))),"function"==typeof this._ctx&&(this._ctx=this._ctx({node:this.root,ctxs:this._ctxs,views:this.views})),this.update(),e={},n=0,s=(i=[function(){var t=[];for(r in this.initer)t.push(r);return t}.call(this)].concat([function(){var t=[];for(r in this.attr)t.push(r);return t}.call(this)],[function(){var t=[];for(r in this.style)t.push(r);return t}.call(this)],[function(){var t=[];for(r in this.text)t.push(r);return t}.call(this)],[function(){var t=[];for(r in this.handler)t.push(r);return t}.call(this)],function(){var t,e=[];for(r in t=this.action)o=t[r],e.push(o);return e}.call(this).map(function(t){var e,n=[];for(e in t)n.push(e);return n}))).length;n<s;++n)for(c=0,h=(a=i[n]).length;c<h;++c)e[a[c]]=!0;for(r in d=[],e)d.push(r);return this.names=d,this.initRender&&this.init().then(function(){return l.render()}),this}).prototype=_(Object.create(Object.prototype),{update:function(t){var e,n,i,r,o,s,a=this;if(null==t&&(t=this.root),this.nodes||(this.nodes=[]),this.eaches||(this.eaches=[]),this.map||(this.map={nodes:{},eaches:{}}),e=this.prefix?"["+this.ld+"-each^="+this.prefix+"\\$]":"["+this.ld+"-each]",n=this.global?[]:ld$.find(t,(this.id?"[ld-scope-"+this.id+"] ":"")+"[ld-scope] "+e),i=ld$.find(t,e),r=this.eaches.map(function(t){return t.n}),o=i.filter(function(t){return!y(t,n)}).filter(function(t){return!y(t,r)}).map(function(t){var e,n,i,r;if(!t.parentNode)return null;try{if(ld$.parent(t.parentNode,"*["+a.ld+"-each]"))return null}catch(t){0}return e=t.getAttribute(a.ld+"-each"),a.handler[e]?(n=t.parentNode,i={idx:Array.from(n.childNodes).indexOf(t),node:t,name:e,nodes:[]},r=document.createComment(" "+a.ld+"-each="+e+" "),a.handler[e].host||n.insertBefore(r,t),n.removeChild(t),(r._data=i).proxy=r,i.container=(t=a.handler[e].host)?new t({root:n}):n,i):null}).filter(function(t){return t}),this.eaches=this.eaches.concat(o),o.map(function(t){var e,n;return((e=a.map.eaches)[n=t.name]||(e[n]=[])).push(t)}),e=this.prefix?"["+this.ld+"^="+this.prefix+"\\$]":"["+this.ld+"]",n=this.global?[]:ld$.find(t,(this.id?"[ld-scope-"+this.id+"] ":"")+"[ld-scope] "+e),o=(i=ld$.find(t,e)).filter(function(t){return!(y(t,n)||y(t,a.nodes))}),this.nodes=this.nodes.concat(o),s=this.prefix?new RegExp("^"+this.prefix+"\\$"):null,o.map(function(n){var i=(n.getAttribute(a.ld)||"").split(" ");return(i=a.prefix?i.map(function(t){return t.replace(s,"").trim()}):i).map(function(t){var e;return((e=a.map.nodes)[t]||(e[t]=[])).push({node:n,names:i,local:{},evts:{}})})}),!this.map.nodes["@"])return this.map.nodes["@"]=[{node:this.root,names:"@",local:{},evts:{}}]},procEach:function(n,i,e,r){var o,s,a,c,t,h,d,l,u,f,p,x,m,v,w=this;for(null==e&&(e=null),o=this.handler[n].list({name:i.name,node:i.node,views:this.views,context:this._ctx,ctx:this._ctx,ctxs:this._ctxs})||[],s=this.handler[n].key,a={},c=[],s?o.map(function(t){return a[s(t)]=t}):s=function(t){return t},t=i.nodes.filter(function(t){return t}).map(function(t){var e=s(t._data);return"object"!=typeof e&&!a[e]||"object"==typeof e&&!y(t._data,o)?(i.container.removeChild(t),t._data=null):c.push(e),t}).filter(function(t){return t._data}),(h=Array.from(i.container.childNodes).indexOf(i.proxy))<0&&(h=i.container.childNodes.length),d=[],l=o.length-1;0<=l;--l)f=o[u=l],0<=(p=c.indexOf(s(f)))?((x=t[p])._data=f,x._obj||(x._obj={node:x,name:n,idx:u,local:{}}),x._obj.data=f,Array.from(i.container.childNodes).indexOf(x)!==(m=h-(o.length-u))&&(i.container.removeChild(x),m=(h=(h=Array.from(i.container.childNodes).indexOf(i.proxy))<0?i.container.childNodes.length:h)-(o.length-u),i.container.insertBefore(x,i.container.childNodes[m+1]),h+=1)):((x=i.node.cloneNode(!0))._data=f,x._obj={node:x,name:n,data:f,idx:u,local:{}},x.removeAttribute(this.ld+"-each"),m=h-(o.length-u),i.container.insertBefore(x,i.container.childNodes[m+1]),h+=1),d.splice(0,0,x);return v=d.filter(function(t){return t}),v=(v=null!=e?v.filter(function(t){return y(s(t._obj.data),e)}):v).map(function(t,e){return w._render(n,t._obj,e,w.handler[n],!0,r)}),i.container.update&&i.container.update(),i.nodes=d,Promise.all(v)},get:function(t){return((this.map.nodes[t]||[])[0]||{}).node},getAll:function(t){return(this.map.nodes[t]||[]).map(function(t){return t.node})},_render:function(e,t,n,s,i,r){var o,a,c,h,d,l,u,f,p,x,m=[];t.ctx=this._ctx,t.context=this._ctx,t.ctxs=this._ctxs,t.views=this.views,s?s.view?(o=function(t){var e=t.node,n=t.local,i=t.data,r=t.ctx,o=t.ctxs,t=t.views;return n._view=new w(((i=_({ctx:i},s.view)).initRender=!1,i.root=e,i.baseViews=t,i.ctxs=o?[r].concat(o):[r],i)),n._view.init()},a=function(t){var e=t.local,t=t.data;return i&&e._view.ctx(t),e._view.render()}):(o=s.init||null,a=s.handler||s.handle||null,c=s.text||null,h=s.attr||null,d=s.style||null,l=s.action||{}):(o=(u=[this.initer[e],this.handler[e],this.attr[e],this.style[e],this.text[e],this.action])[0],a=u[1],h=u[2],d=u[3],c=u[4],l=u[5]);try{if(o&&!(t.inited||(t.inited={}))[e]&&(t.inited[e]=Promise.resolve(o(t)).then(function(){return t.inited[e]=!0})),r)return Promise.resolve((t.inited||(t.inited={}))[e]);if(a&&a(t),c&&(t.node.textContent="function"==typeof c?c(t):c),h)for(f in u=h(t)||{})p=u[f],t.node.setAttribute(f,p);if(d)for(f in u=d(t)||{})p=u[f],t.node.style[f]=p;for(f in u=l||{})(p=u[f])&&(x=s?p:p[e])&&!(t.evts||(t.evts={}))[f]&&(v(t,f,x),m.push(t.evts[f]=!0));return m}catch(t){throw i=t,console.warn("[ldview] failed when rendering "+e+":",i),i}},bindEachNode:function(t){var e=t.name,n=t.container,i=t.idx,t=t.node;if(e=this.map.eaches[e].filter(function(t){return t.container===n})[0])return null!=i?e.nodes.splice(i,0,t):e.nodes.push(t)},unbindEachNode:function(t){var e=t.name,n=t.container,i=t.idx,t=t.node;if(e=this.map.eaches[e].filter(function(t){return t.container===n})[0])return t&&!i&&(i=e.nodes.indexOf(t)),e.nodes.splice(i,1)},init:function(t){for(var e,n=[],i=1,r=arguments.length;i<r;++i)n.push(arguments[i]);return e=n,this._prerender("init",t,e)},render:function(t){for(var e,n=[],i=1,r=arguments.length;i<r;++i)n.push(arguments[i]);return e=n,this._prerender("render",t,e)},_prerender:function(t,e,n){var r,o,s=this,a="init"===t;return this.fire("beforeRender"),r=function(n){var t,e,i=[];return"object"==typeof n&&(t=[n.name,n.key],n=t[0],e=t[1],Array.isArray(e)||(e=[e])),s.map.nodes[n]&&(i=i.concat(s.map.nodes[n].map(function(t,e){return t.name=n,t.idx=e,s._render(n,t,e,"object"==typeof s.handler[n]?{view:s.handler[n]}:null,!1,a)}))),s.map.eaches[n]&&s.handler[n]&&(i=i.concat(s.map.eaches[n].map(function(t){return s.procEach(n,t,e,a)}))),Promise.all(i)},t=e?(Array.isArray(e)?e:[e]).concat(n).map(r):function(){for(var t,e=[],n=0,i=(t=this.names).length;n<i;++n)o=t[n],e.push(r(o));return e}.call(this),this.fire("afterRender"),Promise.all(t)},setContext:function(t){return console.warn("[ldview] `setContext` is deprecated. use `ctx(...)` instead."),this._ctx=t},setCtx:function(t){return console.warn("[ldview] `setCtx` is deprecated. use `ctx(...)` instead."),this._ctx=t},ctx:function(t){return arguments.length?this._ctx=t:this._ctx},on:function(t,e){var n;return((n=this.evtHandler)[t]||(n[t]=[])).push(e)},fire:function(t){for(var e,n,i,r,o=[],s=[],a=1,c=arguments.length;a<c;++a)s.push(arguments[a]);for(e=s,a=0,i=(n=this.evtHandler[t]||[]).length;a<i;++a)r=n[a],o.push(r.apply(this,e));return o}}),"undefined"!=typeof module&&null!==module&&(module.exports=w),"undefined"!=typeof window&&null!==window&&(window.ldView=window.ldview=w)}.call(this);
(function(){function r(r,n){var a={}.hasOwnProperty;for(var t in n)a.call(n,t)&&(r[t]=n[t]);return r}var n,a,t,l,u,e,b,h,i,o,g,s;n="\\s*([+-]?\\d+|nan|NaN)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?|nan|NaN)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l={hex3:/^#([0-9a-fA-F]{3})$/,hex6:/^#([0-9a-fA-F]{6})$/,rgbint:new RegExp("^rgb\\("+[n,n,n]+"\\)$"),rgbp:new RegExp("^rgb\\("+[t,t,t]+"\\)$"),rgbaint:new RegExp("^rgba\\("+[n,n,n,a]+"\\)$"),rgbap:new RegExp("^rgba\\("+[t,t,t,a]+"\\)$"),hslp:new RegExp("^hsl\\("+[a,t,t]+"\\)$"),hslap:new RegExp("^hsla\\("+[a,t,t,a]+"\\)$")},u={hex3:function(r){return r=parseInt(r[1],16),{r:17*(r>>8),g:17*(240&r)>>4,b:17*(15&r),a:1}},hex6:function(r){return r=parseInt(r[1],16),{r:r>>16,g:r>>8&255,b:255&r,a:1}},rgbint:function(r){return{r:+r[1],g:+r[2],b:+r[3],a:1}},rgbp:function(r){return{r:255*r[1]/100,g:255*+r[2]/100,b:255*+r[3]/100,a:1}},rgbaint:function(r){return{r:+r[1],g:+r[2],b:+r[3],a:+r[4]}},rgbap:function(r){return{r:255*r[1]/100,g:255*+r[2]/100,b:255*r[3]/100,a:+r[4]}},hslap:function(r){return{h:+r[1],s:r[2]/100,l:r[3]/100,a:+r[4]}},hslp:function(r){return{h:+r[1],s:r[2]/100,l:r[3]/100,a:1}},all:function(r){var n,a,t,e;if("object"==typeof r)return null==r.a&&(r.a=1),r["@a"]?r=o.lab2rgb(r):r.c?r=o.hcl2rgb(r):r.hex?(n=l.hex3.exec(r.hex))?(a=u.hex3(n)||{},a.a=r.a,a):(n=l.hex6.exec(r.hex))?(a=u.hex6(n),a.a=r.a,a):r:r.value?u.all(r.value):r;if("number"==typeof r)return o.num2rgb(r);r=(r+"").trim().toLowerCase();for(t in a=l)if(e=a[t],n=e.exec(r))return u[t](n);return"undefined"!=typeof named&&null!==named&&named[r]?o.num2rgb(named[r]):"transparent"===r?{r:NaN,g:NaN,b:NaN,a:0}:{r:NaN,g:NaN,b:NaN,a:NaN}}},h=3*(b=6/29)*b,i=b*b*b,o={num2rgb:function(r){return{r:r>>16,g:r>>8&255,b:255&r,a:1}},_hsl2rgb:function(r,n,a){return 255*(r<60?n+(a-n)*r/60:r<180?a:r<240?n+(a-n)*(240-r)/60:n)},hsl2rgb:function(r){var n,a,t,l,u,e,b;return n=r.h,a=r.s,t=r.l,l=r.a,n=n%360+360*(n<0),a=isNaN(n)||isNaN(a)?0:a,u=t+(t<.5?t:1-t)*a,e=2*t-u,{r:(b=this._hsl2rgb(n>=240?n-240:n+120,e,u))>0?b:0,g:(b=this._hsl2rgb(n,e,u))>0?b:0,b:(b=this._hsl2rgb(n<120?n+240:n-120,e,u))>0?b:0,a:l}},rgb2hsl:function(r){var n,a,t,l,u,e,b,h,i,o,g;return n=r.r,a=r.g,t=r.b,l=r.a,u=[n/255,a/255,t/255],n=u[0],a=u[1],t=u[2],e=Math.max(n,a,t),b=Math.min(n,a,t),h=e-b,i=(e+b)/2,0===h?(o=(u=[0,0])[0],g=u[1]):(o=function(){switch(!1){case e!==n:return(a-t)/h%6*60;case e!==a:return 60*((t-n)/h+2);case e!==t:return 60*((n-a)/h+4)}}(),g=h/(1-Math.abs(2*i-1))),o=(o+360)%360,{h:o,s:g,l:i,a:l}},_rgb2lrgb:function(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)},_xyz2lab:function(r){return r>i?Math.pow(r,1/3):r/h+4/29},_lab2xyz:function(r){return r>b?r*r*r:h*(r-4/29)},_lrgb2rgb:function(r){var n,a;return(n=(a=255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055))<255?a:255)>0?n:0},lab2rgb:function(r){var n,a,t,l,u,e,b,h;return n=[r["@l"],r["@a"],r["@b"],null!=r.a?r.a:1],a=n[0],t=n[1],l=n[2],u=n[3],e=(a+16)/116,b=isNaN(t)?e:e+t/500,h=isNaN(l)?e:e-l/200,b=.96422*o._lab2xyz(b),e=1*o._lab2xyz(e),h=.82521*o._lab2xyz(h),{r:o._lrgb2rgb(3.1338561*b-1.6168667*e-.4906146*h),g:o._lrgb2rgb(-.9787684*b+1.9161415*e+.033454*h),b:o._lrgb2rgb(.0719453*b-.2289914*e+1.4052427*h),a:u}},lab2hcl:function(r){var n,a,t,l,u,e;return n=[r["@l"],r["@a"],r["@b"],null!=r.a?r.a:1],a=n[0],t=n[1],l=n[2],u=n[3],0===t&&0===l?{h:NaN,c:0,l:a,a:u}:(e=180*Math.atan2(l,t)/Math.PI,{h:isNaN(e)?e:e<0?e+360:e>0?e:0,c:Math.sqrt(t*t+l*l),l:isNaN(a)?a:a>0?a:0,a:u})},hcl2lab:function(r){var n;return r.a=null!=r.a?r.a:1,isNaN(r.h)?{"@l":r.l,"@a":0,"@b":0,a:r.a}:(n=r.h*Math.PI/180,{"@l":r.l,"@a":Math.cos(n)*r.c,"@b":Math.sin(n)*r.c,a:r.a})},hcl2rgb:function(r){return this.lab2rgb(this.hcl2lab(r))}},r(e=function(n){return r(this,u.all(n))},g={same:function(r,n){var a;return null==n&&(n=this),a=[this.rgb(r),this.rgb(n)],r=a[0],n=a[1],r.r===n.r&&r.g===n.g&&r.b===n.b&&r.a===n.a},rgb:function(r){var n;return null==r&&(r=this),null!=(n=u.all(r)).c?o.lab2rgb(o.hcl2lab(n)):null!=n.h?o.hsl2rgb(n):n},rgbfv:function(r){var n;return null==r&&(r=this),n=this.rgb(r),[n.r/255,n.g/255,n.b/255]},web:function(r,n){var a;return null==r&&(r=this),null==n&&(n=!1),null!=(a=g.rgb(r)).a&&(isNaN(a.a)||!a.a&&["r","g","b"].filter(function(r){return null!=a[r]&&isNaN(a[r])}))?"transparent":a.a<1?this.rgbaStr(a):this.hex(a,n)},rgbaStr:function(r){var n;return null==r&&(r=this),n=g.rgb(r),"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+n.a+")"},hsl:function(r){var n;return null==r&&(r=this),null!=(n=u.all(r)).r?o.rgb2hsl(n):n},hex:function(r,n){var a,t;return null==r&&(r=this),null==n&&(n=!1),null!=r&&"boolean"==typeof r&&(r=(a=[this,r])[0],n=a[1]),t=g.rgb(r),t=["r","g","b"].map(function(r){var n,a;return n=((a=Math.round(t[r]))<255?a:255).toString(16)+"",n=function(r,n){for(var a="";n>0;(n>>=1)&&(r+=r))1&n&&(a+=r);return a}("0",2-n.length)+n}).join(""),n&&t[0]===t[1]&&t[2]===t[3]&&t[4]===t[5]&&(t=t[0]+t[2]+t[4]),"#"+t},lab:function(r){var n,a,t,l,u,e,b,h;return null==r&&(r=this),r.c?o.hcl2lab(r):(n=g.rgb(r),a=n.r,t=n.g,l=n.b,u=n.a,a=o._rgb2lrgb(a),t=o._rgb2lrgb(t),l=o._rgb2lrgb(l),e=o._xyz2lab((.2225045*a+.7168786*t+.0606169*l)/1),a===t&&t===l?b=h=e:(b=o._xyz2lab((.4360747*a+.3850649*t+.1430804*l)/.96422),h=o._xyz2lab((.0139322*a+.0971045*t+.7141733*l)/.82521)),{"@l":116*e-16,"@a":500*(b-e),"@b":200*(e-h),a:u})},hcl:function(r){return null==r&&(r=this),o.lab2hcl(g.lab(r))},int:function(r){return null==r&&(r=this),r=g.rgb(r),(Math.round(r.r)<<16)+(Math.round(r.g)<<8)+Math.round(r.b)},rand:function(){return{h:360*Math.random(),s:Math.random(),l:Math.random(),a:1}},complement:function(r){var n;return n=g.rgb(r),g.hsl({r:255-n.r,g:255-n.g,b:255-n.b})},lighter:function(r,n){var a;return null==r&&(r=this),null==n&&(n=1),a=g.hsl(r),a.l*=Math.pow(1/.7,n),a},darker:function(r,n){var a;return null==r&&(r=this),null==n&&(n=1),a=g.hsl(r),a.l*=Math.pow(.7,n),a}}),e.prototype=r(Object.create(Object.prototype),g);for(s in g)!function(r,n){e.prototype[r]=function(){return n(this)}}(s,g[s]);"undefined"!=typeof module&&null!==module?module.exports=e:window.ldColor=window.ldcolor=e}).call(this);
!function(){var i,o;function n(t,e){var n,r={}.hasOwnProperty;for(n in e)r.call(e,n)&&(t[n]=e[n]);return t}i=function(t,e,n){var r;for(null==n&&(n=document),r=t;r&&r!==n;)r=r.parentNode;if(r!==n)return null;for(r=t;r&&r!==n&&r.matches&&!r.matches(e);)r=r.parentNode;return r!==n||n.matches&&n.matches(e)?r:null},(o=function(t){var e;return null==t&&(t={}),this.evtHandler={},this.opt=n({delay:300,autoZ:!0,baseZ:3e3,escape:!0,byDisplay:!0},t),t.zmgr&&this.zmgr(t.zmgr),this.promises=[],this._r=t.root?"string"==typeof t.root?document.querySelector(t.root):t.root:((e=document.createElement("div")).innerHTML='<div class="base"></div>',e),this.cls="string"==typeof t.type?t.type.split(" "):t.type,this.resident=null!=t.resident&&t.resident,this.inPlace=null==t.inPlace||t.inPlace,this.container="string"==typeof t.container?document.querySelector(t.container):t.container,this._r.content&&this._r.content.nodeType===Element.DOCUMENT_FRAGMENT_NODE||this.init(),this}).prototype=n(Object.create(Object.prototype),{root:function(){return this.inited||this.init(),this._r},init:function(){var t,n,r=this;if(!this.inited)return this.inited=!0,this.inPlace||(this._r.parentNode.removeChild(this._r),document.body.appendChild(this._r)),!this.resident&&this._r.parentNode&&(this._c=document.createComment(" ldcover placeholder "),this._r.parentNode.insertBefore(this._c,this._r),this._r.parentNode.removeChild(this._r)),this._r.content&&this._r.content.nodeType===Element.DOCUMENT_FRAGMENT_NODE&&(this._r=this._r.content.cloneNode(!0).childNodes[0],this._r.parentNode.removeChild(this._r)),(t=this._r.getAttribute("data-lock"))&&"true"===t&&(this.opt.lock=!0),this.inner=this._r.querySelector(".inner"),this.base=this._r.querySelector(".base"),this._r.classList.add.apply(this._r.classList,["ldcv"].concat(this.cls||[])),this.opt.byDisplay&&(this._r.style.display="none"),n=null,this._r.addEventListener("mousedown",function(t){return n=t.target}),this._r.addEventListener("click",function(t){var e;return n!==r._r||r.opt.lock?i(t.target,"*[data-ldcv-cancel]",r._r)?r.cancel():(t=i(t.target,"*[data-ldcv-set]",r._r))&&null!=(e=t.getAttribute("data-ldcv-set"))&&!i(t,".disabled",r._r)?r.set(e):void 0:r.toggle(!1)})},zmgr:function(t){return null!=t?this._zmgr=t:this._zmgr},append:function(t){var e=this._r.childNodes[0];return(e&&e.classList.contains("base")?e:this._r).appendChild(t)},get:function(n){var r=this;return new Promise(function(t,e){return r.promises.push({res:t,rej:e}),r.toggle(!0,n)})},cancel:function(e,t){if(null==t&&(t=!0),this.promises.splice(0).map(function(t){return t.rej(e||((t=new Error).name="lderror",t.id=999,t))}),t)return this.toggle(!1)},set:function(e,t){if(null==t&&(t=!0),this.promises.splice(0).map(function(t){return t.res(e)}),t)return this.toggle(!1)},isOn:function(){return this._r.classList.contains("active")},lock:function(){return this.opt.lock=!0},toggle:function(e,i){var s=this;return new Promise(function(n,t){var r;return s.inited||s.init(),e&&null!=i&&s.fire("data",i),null==e&&s._r.classList.contains("running")||null!=e&&s._r.classList.contains("active")===!!e?n():((r=null!=e?e:!s._r.classList.contains("active"))&&!s._r.parentNode&&(null==s.container&&s._c&&s._c.parentNode?s._c.parentNode.insertBefore(s._r,s._c):(s.container||document.body).appendChild(s._r)),s._r.classList.add("running"),s.opt.byDisplay&&(s._r.style.display="block"),s._r.classList.contains("inline")&&(r?(s.h=function(t){if(!s._r.contains(t.target))return s.toggle(!1)},window.addEventListener("click",s.h)):s.h&&window.removeEventListener("click",s.h)),setTimeout(function(){var e,t;return s._r.classList.toggle("active",r),!s.opt.lock&&s.opt.escape&&r&&(e=function(t){if(27===t.keyCode&&(t=o.popups)[t.length-1]===s)return s.toggle(!1),document.removeEventListener("keyup",e)},document.addEventListener("keyup",e)),s.opt.animation&&s.inner&&s.inner.classList[r?"add":"remove"].apply(s.inner.classList,s.opt.animation.split(" ")),r?o.popups.push(s):0<=(t=o.popups.indexOf(s))&&o.popups.splice(t,1),s.opt.autoZ&&(r?s._r.style.zIndex=s.z=(s._zmgr||o._zmgr).add(s.opt.baseZ):((s._zmgr||o._zmgr).remove(s.z),delete s.z)),s.opt.transformFix&&!r&&s._r.classList.remove("shown"),setTimeout(function(){if(s._r.classList.remove("running"),s.opt.transformFix&&r&&s._r.classList.add("shown"),!r&&s.opt.byDisplay&&(s._r.style.display="none"),r||!s._r.parentNode||s.resident||s._r.parentNode.removeChild(s._r),!r&&s.opt.autoZ)return s._r.style.zIndex=""},s.opt.delay),s.promises.length&&!r&&s.set(void 0,!1),s.fire("toggle."+(r?"on":"off")),n()},50))})},on:function(t,n){var r=this;return(Array.isArray(t)?t:[t]).map(function(t){var e;return((e=r.evtHandler)[t]||(e[t]=[])).push(n)})},fire:function(t){for(var e,n,r,i,s=[],o=[],a=1,l=arguments.length;a<l;++a)o.push(arguments[a]);for(e=o,a=0,r=(n=this.evtHandler[t]||[]).length;a<r;++a)i=n[a],s.push(i.apply(this,e));return s}}),n(o,{popups:[],_zmgr:{add:function(t){return(this.s||(this.s=[])).push(t=Math.max(t||0,((t=this.s)[t.length-1]||0)+1)),t},remove:function(t){if(!((t=(this.s||(this.s=[])).indexOf(t))<0))return this.s.splice(t,1)}},zmgr:function(t){return null!=t?this._zmgr=t:this._zmgr}}),"undefined"!=typeof module&&null!==module?module.exports=o:window&&(window.ldcover=o)}.call(this);
!function(){var u;function t(t,n){var r,e={}.hasOwnProperty;for(r in n)e.call(n,r)&&(t[r]=n[r]);return t}(u=function(r){var e=this;return null==r&&(r={}),this.opt=t({activeClass:"running",baseZ:4e3,autoZ:!1,className:"",atomic:!0},r),this._toggler="function"==typeof r.toggler?r.toggler:function(){},r.zmgr&&this.zmgr(r.zmgr),["root","container"].map(function(t){var n;if(r[t])return n=Array.isArray(r[t])?r[t]:r[t]instanceof NodeList?Array.from(r[t]):[r[t]],e[t]=n.map(function(t){var n="string"==typeof t?document.querySelector(t):t;return n||console.warn("[ldloader] warning: no node found for "+t),n})}),this.container||(this.container=this.root?this.root.map(function(t){return t.parentNode}):[document.body]),this.root||(this.root=this.container.map(function(t){var n=document.createElement("div");return t.appendChild(n),n})),this.root.map(function(t){if(t.classList.add.apply(t.classList,(e.opt.className||"").split(" ").filter(function(t){return t})),t.classList.remove(r.activeClass),r.inactiveClass)return t.classList.add(r.inactiveClass)}),this.running=!1,this.count=0,this}).prototype=t(Object.create(Object.prototype),{zmgr:function(t){return null!=t?this._zmgr=t:this._zmgr},isOn:function(){return this.running},on:function(t){return this.toggle(!0,t=null==t?0:t)},off:function(t,n){return this.toggle(!1,t=null==t?0:t,n=null==n?!1:n)},cancel:function(t){if(clearTimeout(this.handle),null!=t)return this.toggle(t)},flash:function(t,n){var r=this;return null==t&&(t=1e3),null==n&&(n=0),this.toggle(!0,n).then(function(){return r.toggle(!1,t+n)})},render:function(){var t,r,e=this;return this.running&&this.opt.ctrl&&this.opt.ctrl.step?(this.render.runid=t=Math.random(),this.render.start=0,this.opt.ctrl.init&&this.root.map(function(t){return e.opt.ctrl.init.call(t)}),r=function(n){return e.render.start||(e.render.start=n),e.root.map(function(t){return e.opt.ctrl.step.call(t,n-e.render.start)}),e.render.runid===t?requestAnimationFrame(function(t){return r(t)}):e.opt.ctrl.done?e.root.map(function(t){return e.opt.ctrl.done.call(t,n-e.render.start)}):void 0},requestAnimationFrame(function(t){return r(t)})):this.render.runid=-1},toggle:function(r,e,o){var i,s=this;return null==e&&(e=0),null==o&&(o=!1),i=null==r?this.root[0].classList.contains(this.opt.activeClass)?-1:1:r?1:-1,this.handle&&this.cancel(),e?new Promise(function(t,n){return s.handle=setTimeout(function(){return s.toggle(r).then(function(){return t()})},e)}):new Promise(function(t,n){var r,e;return s.count=0<(e=s.count+i)?e:0,o||s.opt.atomic||!(2<=s.count||1===s.count&&i<0)?(s.root.map(function(t){if(t.classList.toggle(s.opt.activeClass,0<i),s.opt.inactiveClass)return t.classList.toggle(s.opt.inactiveClass,i<0)}),s.running=r=s.root[0].classList.contains(s.opt.activeClass),s.opt.ctrl&&s.render(),s.opt.autoZ&&(e=s._zmgr||u._zmgr,r?(s.z=e.add(s.opt.baseZ),s.root.map(function(t){return t.style.zIndex=s.z})):e.remove(s.z)),t()):t()}).then(function(){return s._toggler(0<i)})}}),t(u,{_zmgr:{add:function(t){return(this.s||(this.s=[])).push(t=Math.max(t||0,((t=this.s)[t.length-1]||0)+1)),t},remove:function(t){if(!((t=(this.s||(this.s=[])).indexOf(t))<0))return this.s.splice(t,1)}},zmgr:function(t){return null!=t?this._zmgr=t:this._zmgr}}),"undefined"!=typeof module&&null!==module?module.exports=u:"undefined"!=typeof window&&null!==window&&(window.ldloader=u)}.call(this);
